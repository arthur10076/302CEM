<html>
    <head>
        
        <title>javascript: calculate two numbers</title>
        <meta charset="windows-1252">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<style>
        body {
		    background-image: url(taxbackg.jpg);
			background-color: rgba(255, 255, 255, 0.4);
            background-blend-mode: lighten;
			margin-left: 500px;
			margin-right: 500px;
		}
		h1 {
			color: red;
		}

		input {
		    border-style: solid;
		}
		p {
            font-weight: bold;
        }
        </style>
        <script
           src="http://code.jquery.com/jquery-3.3.1.js"
           integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
           crossorigin="anonymous"></script>
        <script>
		    $(document).ready(function(){
			    $('#n3, #n4, #result1, #result2, #n3text, #n4text, #result1text, #result2text').hide();
                $('#single').click(function(){
                $('#n3, #n4, #result1, #result2, #n3text, #n4text, #result1text, #result2text').hide();
                });
			
			    $('#married').click(function(){
                $('#n3, #n4, #result1, #result2, #n3text, #n4text, #result1text, #result2text').show();
                });
			});
		</script>
		<script>
            function calc()
            {
                var n1 = parseFloat(document.getElementById('n1').value);
                var n2 = n1 * 0.05
				
				if (n1 < 7100*12 ){
				    n2 = 0;
					document.getElementById('n2').value = n2;
				}else if (n2 <= 18000){
				     n2 = n1 * 0.05
				     document.getElementById('n2').value = n2;
				}else if (n2 > 18000){
				     n2 =18000;
					 document.getElementById('n2').value = 18000;
				}
				
				var input1 = n1-n2-132000;
                var prresult;
				var srresult = (n1-n2)*0.15;
                
				
			    if ((n2 == (n1 * 0.05) && n1 <= 360000) || (n2 == 18000 && n1 > 360000)){
				    document.getElementById("n2").style.borderColor = "black";
                    if (input1 <= 0) 
				    {
				        prresult = 0;
				    }
                    else if (input1 <= 50000)
                    {
                        prresult = input1 * 0.02;
                    }
                    else if (input1 <= 100000)
                    {
                        prresult = 1000 + (input1-50000) * 0.06;
                    }
                    else if (input1<=150000)
                    {
				        prresult = 4000 + (input1-100000) * 0.1;	
                    }
                    else if (input1<=200000)
                    {
                        prresult = 9000 + (input1-150000) * 0.14;
                    }
                    else 
                    {
                        prresult = 16000 + (input1-200000) * 0.17;
                    } 
                    	
				    if (prresult > srresult)
				    {
				        document.getElementById('result').value = srresult;
				    }else{
				        document.getElementById('result').value = prresult;
				    }				
				}
				
				
				
                var n3 = parseFloat(document.getElementById('n3').value);
                var n4 = n3 * 0.05
				
				if (n3 < 7100*12 ){
				    n4 = 0;
					document.getElementById('n4').value = n4;
				}else if  (n4 <= 18000){
				     n4 = n3 * 0.05
				     document.getElementById('n4').value = n4;
				}else if (n4 > 18000){
	                 n4 = 18000;
					 document.getElementById('n4').value = 18000; 
				}
				
                var input2 = n3-n4-132000;
				var prresult2;
				var srresult2 = (n3-n4)*0.15;
                
				
				
				if (isNaN(n3)){
				    
				}else if ((n4 == (n3 * 0.05) && n3 <= 360000) || (n4 == 18000 && n3 > 360000)){
				    document.getElementById("n4").style.borderColor = "black";
                    if (input2 <= 0) 
				    {
				        prresult2 = 0;
				    }
                    else if(input2 <= 50000)
                    {
                        prresult2 = input2 * 0.02;
                    }
                    else if(input2 <= 100000)
                    {
                        prresult2 = 1000 + (input2-50000) * 0.06;
                    }
                    else if (input2 <= 150000)
                    {
				        prresult2 = 4000 + (input2-100000) * 0.1;
                    }
                    else if (input2 <= 200000)
                    {
                        prresult2 = 9000 + (input2-150000) * 0.14;
                    }
                    else 
                    {
                        prresult2 = 16000 + (input2-200000) * 0.17;
                    }
				
				    if (prresult2 > srresult2)
				    {
				        document.getElementById('result1').value = srresult2;
				    }else{
				        document.getElementById('result1').value = prresult2;
				    }    
				}else{
				    document.getElementById("n4").style.borderColor = "red";
				    alert("Wrong value of MPF contribution!It should 5% of your annual income.");
				}
				
				var n5 = input1 + input2;
				var prresult3;
				var srresult3 = (n1-n2+n3-n4)*0.15;
				
				if (n5 <= 0) {
				    prresult3 = 0;
				}
				else if (n5 <= 50000) {
				    prresult3 = n5*0.02;
				}
				else if (n5 <= 100000)
                {
                    prresult3 = 1000+(n5-50000)*0.06;
                }
                
                else if (n5 <= 150000)
                {
                    prresult3 = 4000+(n5-100000)*0.1;
                }
                
                else if (n5 <= 200000)
                {
                    prresult3 = 9000+(n5-150000)*0.14;
                }
                else 
                {
                    prresult3 = 16000+(n5-200000)*0.17;
                }
				
				if (prresult3 > srresult3)
				{
				    document.getElementById('result2').value = srresult3;
				}else if (isNaN(prresult3)) {
				    document.getElementById('result2').value = ''; 
				}else{
				    document.getElementById('result2').value = prresult3;
				}
				
				if ((document.getElementById("n2").style.borderColor == "red")||(document.getElementById("n4").style.borderColor == "red")) {
				    document.getElementById("result").value = '';
			        document.getElementById("result1").value = '';
				    document.getElementById("result2").value = '';
				}
            }
        </script>
        
    </head>
    <body>
        <h1>Tax Assessment System</h1>
		<form>
           <input type="radio" id="single" name="status" value="single" checked> Single<br>
           <input type="radio" id="married" name="status" value="married"> Married<br>
        </form>
		<p>Personal Income</p>
		<input type="text" id="n1"/><br/><br/>
		<p>Personal MPF Contribution</p>
        <input type="text" id="n2"/><br/><br/>
		<p id="n3text">Spouse's Income</p>
        <input type="text" id="n3"/><br/><br/>
		<p id="n4text">Spouse's MPF Contribution</p>
        <input type="text" id="n4"/><br/><br/>
        

        
        <p><button onclick="calc();">=</button><p/>
        <p id="resulttext">Personal tax</p>
        <input id="result"/><br/><br/>
		<p id="result1text">Spouse tax</p>
		<input id="result1"/>
		<p id="result2text">Joint tax</p>
		<input id="result2"/>
        <p id='bb'></p>

    </body>
</html>

